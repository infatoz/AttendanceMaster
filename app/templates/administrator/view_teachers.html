{% extends "administrator/base.html" %} 
{% block title %} View All Teachers {% endblock title %}
{% block content %}
<div class="pagetitle">
  <h1>View All Teachers</h1>
  <nav>
    <ol class="breadcrumb">
      <li class="breadcrumb-item"><a href="{% url 'view_teachers' %}">Teachers</a></li>
      <li class="breadcrumb-item">View All Teachers</li>
    </ol>
  </nav>
</div>
<!-- End Page Title -->

<section class="section mb-3">
  <div class="btn-group" role="group" aria-label="Menu">
    <a role="button" class="btn btn-outline-primary btn-sm" href="{% url 'view_teachers' %}"><i class="bi bi-eye"></i> View</a>
    <a role="button" class="btn btn-outline-primary btn-sm" href="{% url 'add_teacher' %}"><i class="bi bi-plus"></i> Add</a>
    <a role="button" class="btn btn-outline-primary btn-sm" href="{% url 'upload_teachers_csv' %}"><i class="bi bi-upload"></i> Upload</a>
  </div>
</section>

<section class="section">
  <div class="row">
    <div class="col-lg-12">
      {% if messages %}
      <ul class="messages">
        {% for message in messages %} {% if message.tags == 'success' %}
        <div
          class="alert alert-success alert-dismissible fade show"
          role="alert"
        >
          <i class="bi bi-check-circle me-1"></i>
          {{message}}
          <button
            type="button"
            class="btn-close"
            data-bs-dismiss="alert"
            aria-label="Close"
          ></button>
        </div>
        {% endif %} {% if message.tags == 'error' %}
        <div
          class="alert alert-danger alert-dismissible fade show"
          role="alert"
        >
          <i class="bi bi-exclamation-octagon me-1"></i>
          {{message}}
          <button
            type="button"
            class="btn-close"
            data-bs-dismiss="alert"
            aria-label="Close"
          ></button>
        </div>
        {% endif %} {% endfor %}
      </ul>
      {% endif %}

      <div class="card">
        <div class="card-body">
          <h5 class="card-title">All Teachers</h5>

          <!-- Table with stripped rows -->
          <table class="table table-bordered display nowrap" id="teachersTable" style="width:100%">
            <thead>
              <tr>
                <th>Staff ID</th>
                <th>Photo</th>
                <th>Fullname</th>
                <th>Email</th>
                <th>Phone</th>
                <th>Department</th>
                <th>Action</th>
              </tr>
            </thead>
            <tbody>
              {% for teacher in teachers %}
              <tr>
                <td>{{ teacher.user.userid }}</td>
                <td><img src="{{ teacher.photo_url }}" alt="{{ teacher.user.fullname }}" title="{{ teacher.user.fullname }}" style="height: 80px;"/></td>
                <td>{{ teacher.user.fullname }}</td>
                <td>{{ teacher.user.email }}</td>
                <td>{{ teacher.user.phone_no }}</td>
                <td>{{ teacher.department }}</td>
                <td>
                  <!-- <a
                    href="{% url 'edit_teacher' teacher.user.userid %}"
                    class="btn btn-warning btn-sm"
                    >Edit</a
                  >
                  <a
                    href="{% url 'delete_teacher' teacher.user.userid %}"
                    class="btn btn-danger btn-sm"
                    >Delete</a
                  > -->
                  <div class="btn-group" role="group" aria-label="Action">
                    <a role="button" class="btn btn-outline-secondary btn-sm" href="{% url 'edit_teacher' teacher.user.userid %}"><i class="bi bi-pencil"></i> Edit</a>
                    <a role="button" class="btn btn-outline-primary btn-sm" href="{% url 'delete_teacher' teacher.user.userid %}"><i class="bi bi-trash"></i> Delete</a>
                  </div>
                </td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
</section>

<script>
  $(document).ready(function() {
    $('#teachersTable').DataTable({
      order: [[1, 'asc']],
        paging: true,
        pageLength: 50,
        lengthMenu: [50, 100, 150, 200, 250,500],
        dom: 'Bfrtip',
        buttons: [
            {
                extend: 'copy',
                text: 'Copy',
                className:'btn btn-sm btn-outline-secondary',
                exportOptions: {
                    columns: ':not(:last-child)'  // Exclude the last column
                }
            },
            {
                extend: 'csv',
                text: 'CSV',
                className:'btn btn-sm btn-outline-secondary',
                exportOptions: {
                    columns: ':not(:last-child)'  // Exclude the last column
                }
            },
            {
                extend: 'excel',
                text: 'Excel',
                className:'btn btn-sm btn-outline-secondary',
                exportOptions: {
                    columns: ':not(:last-child)'  // Exclude the last column
                }
            },
            {
                extend: 'pdf',
                text: 'PDF',
                className: 'btn btn-sm btn-outline-secondary',  
                exportOptions: {
                    columns: ':not(:last-child)'  // Exclude the last column
                }
            },
            {
                extend: 'print',
                text: 'Print',
                className:'btn btn-sm btn-outline-secondary',
                exportOptions: {
                    columns: ':not(:last-child)'  // Exclude the last column
                }
            }
        ]
    });
});
</script>
{% endblock content %}
